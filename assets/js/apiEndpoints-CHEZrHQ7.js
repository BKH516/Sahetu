import{c as t}from"./index-eoxoubdi.js";import{a,b as e}from"./axios-5JVLD2nj.js";import{A as r}from"./api.config-D-uymJF2.js";const o=t("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),n=t("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);class i{static async registerDoctor(t){const e=["/api/doctor/register","/api/auth/doctor/register","/api/register/doctor"];let r=null;for(const n of e)try{return await a.post(n,t)}catch(o){if(r=o,o.response?.status&&404!==o.response.status)throw o}throw r||new Error("فشل في العثور على endpoint صالح للتسجيل")}static async getSpecializations(){const t=[r.ENDPOINTS.SPECIALIZATIONS.PUBLIC,r.ENDPOINTS.SPECIALIZATIONS.GENERAL,r.ENDPOINTS.SPECIALIZATIONS.DOCTOR,r.ENDPOINTS.SPECIALIZATIONS.ADMIN,r.ENDPOINTS.SPECIALIZATIONS.FALLBACK];for(const r of t)try{const t=r.includes("/admin/")?{Accept:"application/json","Content-Type":"application/json"}:{},e=await a.get(r,{headers:t,timeout:5e3});if(e.data&&(Array.isArray(e.data)||Array.isArray(e.data.data)))return e;throw new Error("Invalid data format")}catch(e){if("ERR_NETWORK"===e.code||e.message?.includes("CORS")||"ERR_FAILED"===e.code)continue;if(e.response?.status&&![404,403].includes(e.response.status)&&(r===t[t.length-1]||e.response.status>=500))throw e}return{data:[{id:1,name:"طب عام",name_ar:"طب عام",name_en:"General Medicine"},{id:2,name:"طب أسنان",name_ar:"طب أسنان",name_en:"Dentistry"},{id:3,name:"طب عيون",name_ar:"طب عيون",name_en:"Ophthalmology"},{id:4,name:"طب جلدية",name_ar:"طب جلدية",name_en:"Dermatology"},{id:5,name:"طب قلب",name_ar:"طب قلب",name_en:"Cardiology"},{id:6,name:"طب أعصاب",name_ar:"طب أعصاب",name_en:"Neurology"},{id:7,name:"طب أطفال",name_ar:"طب أطفال",name_en:"Pediatrics"},{id:8,name:"طب نساء",name_ar:"طب نساء",name_en:"Gynecology"},{id:9,name:"طب عظام",name_ar:"طب عظام",name_en:"Orthopedics"},{id:10,name:"طب نفسي",name_ar:"طب نفسي",name_en:"Psychiatry"}]}}static async createUpdateEndpointIfNotExists(){try{return await e.get("/api/doctor/updateProfile"),!0}catch(t){return t.response,!1}}static async updateDoctorProfile(t){const a=["/api/doctor/edit-profile","/api/doctor/updateProfile","/api/doctor/profile/update","/api/doctor/me/update","/api/doctor/register"];let r=null;for(const s of a)try{return await e.post(s,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})}catch(o){if(r=o,404===o.response?.status)continue;if(405===o.response?.status)try{return await e.put(s,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})}catch(n){r=n;continue}if(422===o.response?.status)throw o;if(s===a[a.length-1])break}try{return await e.post("/api/doctor/register",t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})}catch(i){throw r||i}}static async getDoctorProfile(){const t=["/api/doctor/me","/api/doctor/profile","/api/doctor/info"];let a=null;for(const o of t)try{return await e.get(o)}catch(r){if(a=r,r.response?.status&&![404,403].includes(r.response.status))throw r}throw a||new Error("فشل في جلب الملف الشخصي")}static async getNotifications(){const t=[r.ENDPOINTS.NOTIFICATIONS.LIST,"/api/notifications","/api/doctor/notifications"];let a=null;for(const r of t)try{return await e.get(r)}catch(o){if(a=o,o.response?.status&&![404,403].includes(o.response.status))throw o}throw a||new Error("فشل في جلب الإشعارات")}static async markNotificationAsRead(t){const a=r.ENDPOINTS.NOTIFICATIONS.MARK_AS_READ.replace(":id",t.toString());try{return await e.post(a)}catch(o){if(404===o.response?.status)try{const a=`/api/doctor/notifications/${t}/mark-read`;return await e.post(a)}catch(n){throw o}throw o}}static async markAllNotificationsAsRead(){const t=[r.ENDPOINTS.NOTIFICATIONS.MARK_ALL_READ,"/api/doctor/notifications/read-all","/api/notifications/mark-all-read"];let a=null;for(const r of t)try{return await e.post(r)}catch(o){if(a=o,o.response?.status&&![404,405].includes(o.response.status))throw o}throw a||new Error("فشل في تحديث الإشعارات")}static async deleteNotification(t){const a=r.ENDPOINTS.NOTIFICATIONS.DELETE.replace(":id",t.toString());try{return await e.delete(a)}catch(o){if(404===o.response?.status)try{const a=`/api/doctor/notifications/${t}`;return await e.delete(a)}catch(n){throw o}throw o}}}export{i as A,o as B,n as U};
