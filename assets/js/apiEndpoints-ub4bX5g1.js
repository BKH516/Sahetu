import{a as t,b as a}from"./axios-lBo-y8w0.js";import{A as e}from"./api.config-kPv0EHGZ.js";class r{static async registerDoctor(a){const e=["/api/doctor/register","/api/auth/doctor/register","/api/register/doctor"];let r=null;for(const n of e)try{return await t.post(n,a)}catch(o){if(r=o,o.response?.status&&404!==o.response.status)throw o}throw r||new Error("فشل في العثور على endpoint صالح للتسجيل")}static async getSpecializations(){const a=[e.ENDPOINTS.SPECIALIZATIONS.PUBLIC,e.ENDPOINTS.SPECIALIZATIONS.GENERAL,e.ENDPOINTS.SPECIALIZATIONS.DOCTOR,e.ENDPOINTS.SPECIALIZATIONS.ADMIN,e.ENDPOINTS.SPECIALIZATIONS.FALLBACK];for(const e of a)try{const a=e.includes("/admin/")?{Accept:"application/json","Content-Type":"application/json"}:{},r=await t.get(e,{headers:a,timeout:5e3});if(r.data&&(Array.isArray(r.data)||Array.isArray(r.data.data)))return r;throw new Error("Invalid data format")}catch(r){if("ERR_NETWORK"===r.code||r.message?.includes("CORS")||"ERR_FAILED"===r.code)continue;if(r.response?.status&&![404,403].includes(r.response.status)&&(e===a[a.length-1]||r.response.status>=500))throw r}return{data:[{id:1,name:"طب عام",name_ar:"طب عام",name_en:"General Medicine"},{id:2,name:"طب أسنان",name_ar:"طب أسنان",name_en:"Dentistry"},{id:3,name:"طب عيون",name_ar:"طب عيون",name_en:"Ophthalmology"},{id:4,name:"طب جلدية",name_ar:"طب جلدية",name_en:"Dermatology"},{id:5,name:"طب قلب",name_ar:"طب قلب",name_en:"Cardiology"},{id:6,name:"طب أعصاب",name_ar:"طب أعصاب",name_en:"Neurology"},{id:7,name:"طب أطفال",name_ar:"طب أطفال",name_en:"Pediatrics"},{id:8,name:"طب نساء",name_ar:"طب نساء",name_en:"Gynecology"},{id:9,name:"طب عظام",name_ar:"طب عظام",name_en:"Orthopedics"},{id:10,name:"طب نفسي",name_ar:"طب نفسي",name_en:"Psychiatry"}]}}static async createUpdateEndpointIfNotExists(){try{return await a.get("/api/doctor/updateProfile"),!0}catch(t){return t.response,!1}}static async updateDoctorProfile(t){const e=["/api/doctor/edit-profile","/api/doctor/updateProfile","/api/doctor/profile/update","/api/doctor/me/update","/api/doctor/register"];let r=null;for(const s of e)try{return await a.post(s,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})}catch(o){if(r=o,404===o.response?.status)continue;if(405===o.response?.status)try{return await a.put(s,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})}catch(n){r=n;continue}if(422===o.response?.status)throw o;if(s===e[e.length-1])break}try{return await a.post("/api/doctor/register",t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})}catch(i){throw r||i}}static async getDoctorProfile(){const t=["/api/doctor/me","/api/doctor/profile","/api/doctor/info"];let e=null;for(const o of t)try{return await a.get(o)}catch(r){if(e=r,r.response?.status&&![404,403].includes(r.response.status))throw r}throw e||new Error("فشل في جلب الملف الشخصي")}static async getNotifications(){const t=[e.ENDPOINTS.NOTIFICATIONS.LIST,"/api/notifications","/api/doctor/notifications"];let r=null;for(const e of t)try{return await a.get(e)}catch(o){if(r=o,o.response?.status&&![404,403].includes(o.response.status))throw o}throw r||new Error("فشل في جلب الإشعارات")}static async markNotificationAsRead(t){const r=e.ENDPOINTS.NOTIFICATIONS.MARK_AS_READ.replace(":id",t.toString());try{return await a.post(r)}catch(o){if(404===o.response?.status)try{const e=`/api/doctor/notifications/${t}/mark-read`;return await a.post(e)}catch(n){throw o}throw o}}static async markAllNotificationsAsRead(){const t=[e.ENDPOINTS.NOTIFICATIONS.MARK_ALL_READ,"/api/doctor/notifications/read-all","/api/notifications/mark-all-read"];let r=null;for(const e of t)try{return await a.post(e)}catch(o){if(r=o,o.response?.status&&![404,405].includes(o.response.status))throw o}throw r||new Error("فشل في تحديث الإشعارات")}static async deleteNotification(t){const r=e.ENDPOINTS.NOTIFICATIONS.DELETE.replace(":id",t.toString());try{return await a.delete(r)}catch(o){if(404===o.response?.status)try{const e=`/api/doctor/notifications/${t}`;return await a.delete(e)}catch(n){throw o}throw o}}}export{r as A};
