import{n as e,r as a,S as t,o as s,V as r,j as o,A as l,W as d,G as i,J as n}from"./react-vendor-DWMGvGTO.js";import{I as c,B as x,M as m,L as h,b as u,i as g}from"./index-Bn4zpa56.js";import{b as f}from"./axios-lBo-y8w0.js";import{P as p,F as w}from"./Particles3D-xV4Nh4KN.js";import{L as b}from"./LanguageSwitcher-4Bl7O_p7.js";import{m as y}from"./animation-vendor-DtfVNoxx.js";import"./vendor-SX7gLFj9.js";import"./i18n-vendor-aVkm1h7f.js";import"./http-vendor-vzM7rUwp.js";const j=({onBackToLogin:j})=>{const{t:v,i18n:k}=e(),N="ar"===k.language,[P,C]=a.useState("email"),[S,L]=a.useState(""),[F,q]=a.useState(""),[$,T]=a.useState(""),[O,E]=a.useState(""),[I,M]=a.useState(!1),[R,z]=a.useState(!1),[B,D]=a.useState({}),[A,G]=a.useState(!1),[H,J]=a.useState(null),[V,W]=a.useState(null),K=a.useMemo(()=>[{icon:t,label:v("auth.login.features.dataProtection")},{icon:s,label:v("auth.login.features.fastSupport")},{icon:r,label:v("auth.login.features.secureLogin")}],[v]),Q=a.useMemo(()=>[{key:"email",title:v("auth.forgotPassword.sendCode"),description:v("auth.forgotPassword.enterEmailForCode")},{key:"reset",title:v("auth.forgotPassword.resetPasswordButton"),description:S?`${v("auth.forgotPassword.verificationCodeSent")} ${S}`:v("auth.forgotPassword.verificationCodePlaceholder")}],[v,S]),U=(e,a)=>{if(!e)return a;const t=e,s=t.response?.data,r=s?.message||s?.error;if(r)return r;if(s?.errors){const e=Object.keys(s.errors)[0];if(e&&s.errors[e]?.length)return s.errors[e][0]}return t.message&&"Network Error"!==t.message?t.message:a},X=(e,a)=>{switch(e){case"email":L(a);break;case"code":q(a.replace(/[^0-9]/g,""));break;case"newPassword":T(a);break;case"confirmPassword":E(a)}B[e]&&D(a=>({...a,[e]:void 0}))};return o.jsxs("div",{className:"relative min-h-screen overflow-y-auto bg-gradient-to-br from-gray-100 via-gray-50 to-gray-100 dark:from-gray-900 dark:via-gray-950 dark:to-gray-900 flex items-center justify-center px-4 py-8 lg:py-10",dir:N?"rtl":"ltr",children:[o.jsx(p,{}),o.jsx(w,{}),o.jsx("div",{className:"w-full max-w-7xl xl:max-w-8xl mx-auto px-2 sm:px-6 lg:px-8 xl:px-12 relative z-10 min-h-full lg:h-full flex items-center",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-8 w-full",children:[o.jsx("div",{className:"hidden lg:flex lg:col-span-5",children:o.jsxs(y.div,{initial:{opacity:0,x:N?50:-50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-cyan-500/90 via-blue-600/95 to-indigo-700/95 shadow-2xl border border-white/10 px-10 py-12 flex flex-col justify-between text-white w-full",children:[o.jsx("div",{className:"absolute top-4 end-4",children:o.jsx(b,{})}),o.jsxs("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:[o.jsx(y.div,{className:"absolute -top-16 -start-16 w-72 h-72 bg-white/30 rounded-full blur-2xl",animate:{scale:[1,1.2,1],rotate:[0,15,0]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),o.jsx(y.div,{className:"absolute bottom-0 end-0 w-80 h-80 bg-white/20 rounded-full blur-3xl",animate:{scale:[1.1,.9,1.1],rotate:[0,-20,0]},transition:{duration:14,repeat:1/0,ease:"easeInOut"}})]}),o.jsxs("div",{className:"relative z-10 space-y-8",children:[o.jsxs("div",{className:N?"text-right":"text-left",children:[o.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/70",children:v("auth.forgotPassword.forgotPasswordTitle")}),o.jsx("h1",{className:"mt-4 text-4xl font-black leading-tight",children:o.jsx(c,{text:v("auth.forgotPassword.title"),className:"bg-gradient-to-r from-white via-cyan-100 to-white/80 bg-clip-text text-transparent drop-shadow-lg"})}),o.jsx("p",{className:"mt-4 text-base text-white/80 max-w-md",children:v("auth.forgotPassword.enterEmailForCode")})]}),o.jsx("div",{className:"space-y-4",children:K.map((e,a)=>o.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2*a},className:"relative overflow-hidden rounded-2xl border border-white/15 bg-white/10 backdrop-blur-lg px-5 py-4 flex items-center gap-4",children:[o.jsx("div",{className:"rounded-xl bg-white/20 p-2 shadow-lg",children:o.jsx(e.icon,{className:"h-5 w-5 text-white"})}),o.jsx("span",{className:"text-sm font-medium text-white/80",children:e.label})]},e.label))}),o.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"rounded-2xl border border-white/20 bg-white/10 backdrop-blur-xl px-6 py-5 text-sm text-white/80",children:v("auth.login.features.arabicInterface")})]})]})}),o.jsxs("div",{className:"lg:col-span-7 flex flex-col h-full",children:[o.jsxs("div",{className:"lg:hidden mb-6 flex items-center justify-between",children:[o.jsxs(x,{type:"button",variant:"ghost",onClick:j,className:"flex items-center gap-2 text-slate-700 dark:text-gray-200 hover:text-slate-900 dark:hover:text-white",children:[o.jsx(l,{className:"w-5 h-5 "+(N?"":"rotate-180")}),o.jsx("span",{className:"text-sm font-medium",children:v("auth.forgotPassword.backToLogin")})]}),o.jsx(b,{})]}),o.jsx(y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"bg-white/85 dark:bg-gray-900/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-slate-200/60 dark:border-gray-800/70 flex-1",children:o.jsxs("div",{className:"p-5 sm:p-8 md:p-10 flex flex-col gap-6 h-full",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(x,{type:"button",variant:"ghost",onClick:j,className:"hidden lg:inline-flex items-center gap-2 text-slate-700 dark:text-gray-200 hover:text-slate-900 dark:hover:text-white",children:[o.jsx(l,{className:"w-5 h-5 "+(N?"":"rotate-180")}),o.jsx("span",{className:"text-sm font-medium",children:v("auth.forgotPassword.backToLogin")})]}),o.jsx("span",{className:"hidden lg:block text-xs font-semibold uppercase tracking-[0.3em] text-cyan-600 dark:text-cyan-400",children:v("auth.forgotPassword.title")})]}),o.jsxs("div",{className:"space-y-3 text-center "+(N?"lg:text-right":"lg:text-left"),children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-slate-900 dark:text-white",children:o.jsx(c,{text:v("auth.forgotPassword.title"),className:"bg-clip-text text-transparent bg-gradient-to-r from-slate-900 via-cyan-600 to-blue-600 dark:from-white dark:via-cyan-300 dark:to-blue-300"})}),o.jsx("p",{className:"text-sm sm:text-base text-slate-500 dark:text-gray-300",children:"email"===P?v("auth.forgotPassword.enterEmailForCode"):`${v("auth.forgotPassword.verificationCodeSent")} ${S}`})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Q.map(e=>{const a=P===e.key,t="reset"===P&&"email"===e.key,s=a?"border-cyan-500 bg-cyan-50/80 dark:bg-cyan-500/5 text-cyan-700 dark:text-cyan-300 shadow-lg":t?"border-emerald-500 bg-emerald-50/80 dark:bg-emerald-500/5 text-emerald-700 dark:text-emerald-300 shadow-lg":"border-slate-200 dark:border-gray-700 bg-white/80 dark:bg-gray-900/40 text-slate-600 dark:text-gray-300";return o.jsxs(y.div,{whileHover:{scale:a||t?1.02:1.01},className:`rounded-2xl border px-4 py-3 shadow-sm transition-all duration-300 flex flex-col gap-1 ${s} ${N?"text-right":"text-left"}`,children:[o.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:e.title}),o.jsx("span",{className:"text-sm leading-relaxed opacity-80",children:e.description})]},e.key)})}),o.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:["email"===P?o.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),S?g(S)?(D({}),1):(D({email:v("auth.forgotPassword.emailInvalid")}),0):(D({email:v("auth.forgotPassword.emailRequired")}),0)){G(!0),J(null),W(null);try{await f.post("/api/password/forgot",{email:S.trim()}),W(v("auth.forgotPassword.codeSentSuccess")),C("reset"),D({})}catch(a){J(U(a,v("auth.forgotPassword.sendCodeFailed")))}finally{G(!1)}}},className:"space-y-5",dir:N?"rtl":"ltr",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"email",className:"text-sm font-semibold text-slate-700 dark:text-gray-200",children:v("auth.forgotPassword.email")}),o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 text-slate-400 dark:text-gray-500 group-focus-within:text-cyan-500 transition-colors",children:o.jsx(m,{})}),o.jsx("input",{type:"email",id:"email",value:S,onChange:e=>X("email",e.target.value),className:"w-full ps-11 pe-4 py-3.5 rounded-xl border-2 bg-white/90 dark:bg-gray-900/60 text-slate-900 dark:text-gray-100 shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 placeholder:text-sm placeholder:text-slate-400 "+(B.email?"border-red-400 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 dark:border-gray-700 hover:border-cyan-400/70"),placeholder:v("auth.forgotPassword.email"),required:!0,disabled:A})]}),B.email&&o.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:B.email})]}),o.jsx(x,{type:"submit",disabled:A,className:"w-full h-12 bg-gradient-to-r from-cyan-600 via-blue-600 to-indigo-600 hover:from-cyan-500 hover:via-blue-500 hover:to-indigo-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:A?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(h,{size:"sm",color:"white"}),v("auth.forgotPassword.sending")]}):o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[v("auth.forgotPassword.sendCode"),o.jsx(l,{className:"w-4 h-4 "+(N?"rotate-180":"")})]})})]}):o.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return F?6!==F.length&&(e.code=v("auth.forgotPassword.codeLength")):e.code=v("auth.forgotPassword.codeRequired"),$?$.length<6&&(e.newPassword=v("auth.forgotPassword.newPasswordMinLength")):e.newPassword=v("auth.forgotPassword.newPasswordRequired"),O?$!==O&&(e.confirmPassword=v("auth.forgotPassword.passwordsMismatch")):e.confirmPassword=v("auth.forgotPassword.confirmPasswordRequired"),D(e),0===Object.keys(e).length})()){G(!0),J(null),W(null);try{await f.post("/api/password/reset",{email:S.trim(),code:F.trim(),password:$}),W(v("auth.forgotPassword.passwordResetSuccess")),setTimeout(()=>{j()},1200)}catch(a){J(U(a,v("auth.forgotPassword.resetPasswordFailed")))}finally{G(!1)}}},className:"space-y-5",dir:N?"rtl":"ltr",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"code",className:"text-sm font-semibold text-slate-700 dark:text-gray-200",children:v("auth.forgotPassword.verificationCode")}),o.jsx("input",{type:"text",id:"code",value:F,onChange:e=>X("code",e.target.value),maxLength:6,className:"w-full px-4 py-3.5 text-center tracking-[0.4em] uppercase rounded-xl border-2 bg-white/90 dark:bg-gray-900/60 text-lg font-semibold text-slate-900 dark:text-gray-100 shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 placeholder:text-sm placeholder:text-slate-400 "+(B.code?"border-red-400 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 dark:border-gray-700 hover:border-cyan-400/70"),placeholder:v("auth.forgotPassword.verificationCodePlaceholder"),required:!0,disabled:A}),B.code&&o.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:B.code})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"newPassword",className:"text-sm font-semibold text-slate-700 dark:text-gray-200",children:v("auth.forgotPassword.newPassword")}),o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 text-slate-400 dark:text-gray-500 group-focus-within:text-cyan-500 transition-colors",children:o.jsx(u,{})}),o.jsx("input",{type:I?"text":"password",id:"newPassword",value:$,onChange:e=>X("newPassword",e.target.value),className:"w-full ps-11 pe-12 py-3.5 rounded-xl border-2 bg-white/90 dark:bg-gray-900/60 text-slate-900 dark:text-gray-100 shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 placeholder:text-sm placeholder:text-slate-400 "+(B.newPassword?"border-red-400 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 dark:border-gray-700 hover:border-cyan-400/70"),placeholder:v("auth.forgotPassword.newPassword"),required:!0,disabled:A}),o.jsx("button",{type:"button",onClick:()=>M(!I),className:`absolute inset-y-0 ${N?"start-0 ps-3":"end-0 pe-3"} flex items-center text-slate-400 dark:text-gray-500 hover:text-slate-600 dark:hover:text-gray-300 transition-colors`,disabled:A,children:I?o.jsx(i,{className:"h-5 w-5"}):o.jsx(n,{className:"h-5 w-5"})})]}),B.newPassword&&o.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:B.newPassword})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-semibold text-slate-700 dark:text-gray-200",children:v("auth.forgotPassword.confirmPassword")}),o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 text-slate-400 dark:text-gray-500 group-focus-within:text-cyan-500 transition-colors",children:o.jsx(u,{})}),o.jsx("input",{type:R?"text":"password",id:"confirmPassword",value:O,onChange:e=>X("confirmPassword",e.target.value),className:"w-full ps-11 pe-12 py-3.5 rounded-xl border-2 bg-white/90 dark:bg-gray-900/60 text-slate-900 dark:text-gray-100 shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-500/20 focus:border-cyan-500 placeholder:text-sm placeholder:text-slate-400 "+(B.confirmPassword?"border-red-400 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 dark:border-gray-700 hover:border-cyan-400/70"),placeholder:v("auth.forgotPassword.confirmPassword"),required:!0,disabled:A}),o.jsx("button",{type:"button",onClick:()=>z(!R),className:`absolute inset-y-0 ${N?"start-0 ps-3":"end-0 pe-3"} flex items-center text-slate-400 dark:text-gray-500 hover:text-slate-600 dark:hover:text-gray-300 transition-colors`,disabled:A,children:R?o.jsx(i,{className:"h-5 w-5"}):o.jsx(n,{className:"h-5 w-5"})})]}),B.confirmPassword&&o.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:B.confirmPassword})]}),o.jsx(x,{type:"submit",disabled:A,className:"w-full h-12 bg-gradient-to-r from-emerald-500 via-cyan-500 to-blue-600 hover:from-emerald-400 hover:via-cyan-400 hover:to-blue-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:A?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(h,{size:"sm",color:"white"}),v("auth.forgotPassword.resettingPassword")]}):v("auth.forgotPassword.resetPasswordButton")})]}),H&&o.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-2xl border border-red-200 dark:border-red-900/40 bg-red-50/90 dark:bg-red-900/20 px-4 py-3 text-sm text-red-600 dark:text-red-300",children:H}),V&&o.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-2xl border border-emerald-200 dark:border-emerald-900/40 bg-emerald-50/90 dark:bg-emerald-900/20 px-4 py-3 text-sm text-emerald-600 dark:text-emerald-300",children:V}),"email"===P?o.jsxs("p",{className:"text-center text-sm text-slate-500 dark:text-gray-300",children:[v("auth.forgotPassword.rememberPassword")," ",o.jsx("button",{onClick:j,disabled:A,className:"font-semibold text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 underline-offset-4 hover:underline transition-colors disabled:opacity-50",children:v("auth.forgotPassword.backToLogin")})]}):o.jsx("div",{className:"text-center",children:o.jsxs(x,{type:"button",variant:"ghost",onClick:()=>{C("email"),q(""),T(""),E(""),M(!1),z(!1),D({}),J(null),W(null)},disabled:A,className:"mx-auto flex items-center gap-2 text-cyan-700 dark:text-cyan-300 hover:text-cyan-900 dark:hover:text-cyan-200",children:[o.jsx(d,{className:"w-4 h-4 "+(N?"rotate-180":"")}),v("auth.forgotPassword.backToChangeEmail")]})})]})]})})]})]})})]})};export{j as default};
